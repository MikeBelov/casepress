CasePress - adaptive case managment system powered by WordPress
=========

[casepress.org](http://casepress.org/)

Лицензия [MIT](http://ru.wikipedia.org/wiki/%D0%9B%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F_MIT)

Это бета-версия. Все вопросы, предложения и идеи пишем тут https://github.com/sistemo/casepress/issues

# Установка

1. Ставим тему https://github.com/casepress-studio/alienship-cp
2. Лучше сразу создать дочернюю тему
3. Выполняем инструкцию http://casepress.org/kb/shpargalka/


# Todo

## Р0. Прочее
1. Добавить хук замены заголовков поста в форме редактирования


## Р1. Орг.структура
1. Переименовать org_item в div
2. slug сделать structure


## Р2. Метки CP
- Суть мето в том, что они позволят классифицировать и отбирать сущности системы по нужной логике
- Ключ cp_tag
- Например при добавлении участников к делу, будут добавляться метки типа member-123 где 123 - это ИД персоны
- Затем зная ИД персоны, мы сможем отобрать все дела, в которых он является участником
- Аналогично если добавили ответственного, то добавляем метку responsible-123
- Тем самым эмулируется некое подобие графовых БД
- Такосномия должна быть не публичная. Ее нельзя менять руками. Но она должна участвовать в запросах.

## Р3. Уведомления
- Отладить уведомление о закрытии
- Добавить уведомление об открытии дела на участников
- Добавить уведомление о нарушении срока


## Р4. ACL
- Интегрировать ACL


## Р5. Тема
- Миниатюру сделать float:right
- Отличать новые дела, от не новых. Через мету "list_readers" куда записывать ID пользователей, которые уже читали дело.
 

## Р6. Календарь
Интегрироваться с https://github.com/casepress-studio/calendar-wordpress-cp



## Р7. Согласования
Нужно реализовать механизм согласования похожий на то как сделан у АльфаБанка https://yadi.sk/d/ORTHJ7p9We8Fq
1. У дела добавить действие "Согласовать". При нажатие на которое вылетает бокс выбора согласующих.
2. ИД согласующих добавляются в мету "for\_agreement_cp"
3. Если пользователь добавлен в список согласующих, то выводим для него кнопку "Согласовать" перед контентом (хук 'the\_content') или "Отказать". В зависимости от выбора, кнопка залипает. ИД добавляется в мету  denial\_cp или agreed_cp.
4. При добавлении ИД в denial\_cp или agreed\_cp, он удаляется из смежных мет.
5. Добавляем шорткод [agreement], который выводит ссылку "На согласование" дела на согласовании. Ссылку на Согласованные и ссылку на Отказанные. (все это через обычный запрос в УРЛ)

# Changelog

## 20141001
- Стилизовать ACF под alienship. Наработки можно взять от у https://github.com/fotonstep
- URL перезаписи http://casepress.org/kb/web/kak-pomenyat-format-url-dlya-cpt-wordpress/
- Вырезан DataTable и убраны шаблоны из плагина. Чтобы применялись типовые шаблоны темы Alienship


## 20140830
- Перетащить систему на Alienship
- Изменить вывод постов на блог. С возможностью через хук добавлять различные поля в вывод.
- Перетащить все секции на хук the_content
